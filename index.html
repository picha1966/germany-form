<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body { font-family: sans-serif; padding: 20px; background: #fff; color: #000; }
        .form-group { margin-bottom: 15px; }
        label { display: block; font-size: 14px; margin-bottom: 5px; color: #555; }
        /* –†–æ–±–∏–º–æ —ñ–Ω–ø—É—Ç–∏ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –ø—Ä–æ—Å—Ç–∏–º–∏, —â–æ–± –≤–æ–Ω–∏ –Ω–µ –±–ª–æ–∫—É–≤–∞–ª–∏—Å—è */
        input { 
            width: 100%; padding: 12px; border: 1px solid #ccc; border-radius: 8px; 
            font-size: 16px; box-sizing: border-box; -webkit-user-select: text;
        }
        button { 
            width: 100%; padding: 16px; background: #2cab37; color: white; 
            border: none; border-radius: 12px; font-weight: bold; font-size: 16px; margin-top: 20px;
        }
        .error-hint { color: red; font-size: 12px; display: none; margin-top: 5px; }
    </style>
</head>
<body>
    <h3>üìù –¢–µ—Å—Ç–æ–≤–∞ –ê–Ω–∫–µ—Ç–∞</h3>
    
    <div class="form-group">
        <label>–í–∞—à–µ –Ü–º'—è (–ª–∞—Ç–∏–Ω–∏—Ü–µ—é)</label>
        <input type="text" id="first_name" placeholder="–ù–∞–ø—Ä–∏–∫–ª–∞–¥: Vitalii">
        <div id="err_fn" class="error-hint">‚ö†Ô∏è –ë—É–¥—å –ª–∞—Å–∫–∞, –≤–≤–µ–¥—ñ—Ç—å —ñ–º'—è</div>
    </div>

    <div class="form-group">
        <label>–í–∞—à–µ –ü—Ä—ñ–∑–≤–∏—â–µ (–ª–∞—Ç–∏–Ω–∏—Ü–µ—é)</label>
        <input type="text" id="last_name" placeholder="–ù–∞–ø—Ä–∏–∫–ª–∞–¥: Pichkur">
        <div id="err_ln" class="error-hint">‚ö†Ô∏è –ë—É–¥—å –ª–∞—Å–∫–∞, –≤–≤–µ–¥—ñ—Ç—å –ø—Ä—ñ–∑–≤–∏—â–µ</div>
    </div>

    <button id="main_btn">–°–ö–£–í–ê–¢–ò –î–û–ö–£–ú–ï–ù–¢ ‚úÖ</button>

    <script>
        let tg = window.Telegram.WebApp;
        tg.expand(); // –†–æ–∑–≥–æ—Ä—Ç–∞—î–º–æ –Ω–∞ –≤–µ—Å—å –µ–∫—Ä–∞–Ω

        const btn = document.getElementById('main_btn');

        btn.addEventListener('click', function() {
            const fn = document.getElementById('first_name').value.trim();
            const ln = document.getElementById('last_name').value.trim();
            const errFn = document.getElementById('err_fn');
            const errLn = document.getElementById('err_ln');

            // –°–∫–∏–¥–∞—î–º–æ –ø–æ–º–∏–ª–∫–∏
            errFn.style.display = 'none';
            errLn.style.display = 'none';

            // –ü–ï–†–ï–í–Ü–†–ö–ê: —è–∫—â–æ –ø–æ—Ä–æ–∂–Ω—å–æ, –ù–ï –∑–∞–∫—Ä–∏–≤–∞—î–º–æ –∞–Ω–∫–µ—Ç—É
            if (fn === "" || ln === "") {
                if (fn === "") errFn.style.display = 'block';
                if (ln === "") errLn.style.display = 'block';
                return; // –ó–£–ü–ò–ù–Ø–Ñ–ú–û –¢–£–¢. –ê–Ω–∫–µ—Ç–∞ –ù–ï –∑–Ω–∏–∫–Ω–µ.
            }

            // –Ø–∫—â–æ –¥–∞–Ω—ñ —î - –≤—ñ–¥–ø—Ä–∞–≤–ª—è—î–º–æ
            btn.innerText = "–ù–ê–î–°–ò–õ–ê–ù–ù–Ø...";
            btn.disabled = true;

            const payload = {
                doc_type: 'anmeldung',
                user_answers: {
                    first_name: fn,
                    last_name: ln
                }
            };

            tg.sendData(JSON.stringify(payload));
            
            // –ó–∞–∫—Ä–∏–≤–∞—î–º–æ —Ç—ñ–ª—å–∫–∏ –ø—ñ—Å–ª—è —É—Å–ø—ñ—à–Ω–æ—ó –≤—ñ–¥–ø—Ä–∞–≤–∫–∏
            setTimeout(() => {
                tg.close();
            }, 400);
        });
    </script>
</body>
</html>




